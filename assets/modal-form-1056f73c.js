import{a as b,i as M,T as I,b as _}from"./vendor-8598a644.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const h=document.querySelector("[data-menu-open]"),k=document.querySelector("[data-menu-close]"),O=document.querySelector(".nav"),J=document.querySelector('[data-action="homepage"]'),Q=document.querySelector('[data-action="favoritespage"]'),q=document.querySelector(".menu-back-drop"),A=document.body,V=document.querySelector(".header"),z=window.location.href;z.includes("favorite")&&(J.classList.remove("current"),Q.classList.add("current"),V.style.position="static");document.addEventListener("keydown",e=>{e.key==="Escape"&&x()});k.addEventListener("click",x);h.addEventListener("click",()=>{O.classList.add("active"),h.classList.add("is-hidden"),k.classList.remove("is-hidden"),A.classList.add("lock"),q.classList.add("active")});function x(){O.classList.remove("active"),h.classList.remove("is-hidden"),k.classList.add("is-hidden"),A.classList.remove("lock"),q.classList.remove("active")}q.addEventListener("click",G);function G(e){e.target.classList.contains("menu-back-drop")&&x()}document.addEventListener("DOMContentLoaded",()=>{W()});const C=document.getElementById("exerciseModal"),$=document.getElementById("closeModalBtn"),N=document.getElementById("information"),r=document.getElementById("addToFavoritesBtn");let D,d;async function K(e){try{d=(await b.create({baseURL:"https://energyflow.b.goit.study/api/exercises"}).get(e)).data,Y(d)}catch{M.error({title:"Error",message:"Error fetching exercise data: ",position:"topRight"})}}const W=()=>{D=document.querySelectorAll(".workout-btn-container"),D.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=t.target.id;K(o)})})};async function Y(e){const{bodyPart:t,burnedCalories:o,description:i,equipment:s,gifUrl:n,name:c,popularity:g,rating:f,target:v,time:y}=e,L=`

        <div class="gif">
        <img src="${n}" alt="${c}" >
        </div>

        <div class = "text">

        <h2>${c}</h2>
        
        <div class="rating-container">
            <p>${f}</p>
            <svg class="icon-star" width="12" height="12">
                <use href="../img/sprite.svg#icon-star"></use>
            </svg>
        </div>

        <ul class="info-block">
    <li class="info-item">
        <h3 class="info-text">Target</h3>
        <p class="modal-pop-descr">${v}</p>
    </li>
    <li class="info-item">
        <h3 class="info-text">Body Part</h3>
        <p class="modal-pop-descr">${t}</p>
    </li>
    <li class="info-item">
        <h3 class="info-text">Equipment</h3>
        <p class="modal-pop-descr">${s}</p>
    </li>
    <li class="info-item">
        <h3 class="info-text">Popular</h3>
        <p class="modal-pop-descr">${g}</p>
    </li>
    <li class="info-item">
        <h3 class="info-text">Burned Calories</h3>
        <p class="modal-pop-descr">${o}/${y}min</p>
    </li>
</ul>


        <p class="description">Description: ${i}</p> 
        </div>`;N.innerHTML=L,X()}function X(){C.classList.add("open"),document.body.style.overflow="hidden",$.addEventListener("click",p),document.addEventListener("mouseup",R),document.addEventListener("keydown",F),T()}function p(){C.classList.remove("open"),$.removeEventListener("click",p),document.removeEventListener("mouseup",R),document.removeEventListener("keydown",F),N.innerHTML="",document.body.style.overflow="",r.removeEventListener("click",u),r.removeEventListener("click",m)}const R=function(e){!document.getElementById("modal").contains(e.target)&&C.classList.contains("open")&&p()},F=function(e){e.key==="Escape"&&p()},Z=e=>{const{_id:t,bodyPart:o,burnedCalories:i,description:s,equipment:n,gifUrl:c,name:g,popularity:f,rating:v,target:y,time:L}=e;return{_id:t,bodyPart:o,burnedCalories:i,description:s,equipment:n,gifUrl:c,name:g,popularity:f,rating:v,target:y,time:L}},u=()=>{let e=localStorage.getItem("favoritesCard"),t=[];e!=null&&(t=JSON.parse(e));const o=Z(d);t.push(o),localStorage.setItem("favoritesCard",JSON.stringify(t)),T()},m=()=>{const{_id:e}=d;let t=localStorage.getItem("favoritesCard"),o=JSON.parse(t).filter(i=>i._id!=e);o.length!=0?localStorage.setItem("favoritesCard",JSON.stringify(o)):localStorage.removeItem("favoritesCard"),T()},T=()=>{const{_id:e}=d;let t=localStorage.getItem("favoritesCard");r.removeEventListener("click",m),r.addEventListener("click",u),r.innerHTML="Add to favorites",t!=null&&JSON.parse(t).forEach(o=>{o._id==e?(r.innerHTML="Delete favorite",r.removeEventListener("click",u),r.addEventListener("click",m)):(r.removeEventListener("click",m),r.addEventListener("click",u),r.innerHTML="Add to favorites",r.appendChild(B))})},B=document.createElementNS("http://www.w3.org/2000/svg","svg");B.setAttribute("class","heart");const P=document.createElementNS("http://www.w3.org/2000/svg","use");P.setAttribute("href","./img/sprite.svg#heart");B.appendChild(P);const ee=document.querySelector(".quote-info"),j="quote-of-the-day",E="date",te=new Date,S=te.getDate();async function oe(){try{const o=(await b.create({baseURL:"https://energyflow.b.goit.study/api"}).get("/quote")).data;H(o),se(o,S)}catch(e){M.error({timeout:5e3,title:"Error",message:e.message,position:"topRight"})}}//! SAVE QUOTE AND DATA
function se(e,t){localStorage.setItem(j,JSON.stringify(e)),localStorage.setItem(E,t)}//! RENDER QUOTE
function H(e){const t=[e];ee.innerHTML=t.reduce((o,{quote:i,author:s})=>o+`<p class="quote-text">${i}</p>
        <h3 class="quote-author">${s}</h3>`,"")}//! CHECK DAY AND GET NEW QUOTE
async function ne(){const e=localStorage.getItem(E);if(isNaN(e)){M.error({timeout:5e3,title:"Error",message:error.message,position:"topRight"});return}if(parseInt(e)===S){const t=localStorage.getItem(j);if(t){const o=JSON.parse(t);H(o)}return}await oe(),localStorage.setItem(E,S.toString())}ne();//! ANIMATION 
new I(".quote-info",{speed:26,startDelay:300,waitUntilVisible:!0,afterComplete:function(e){e.destroy()}}).go();new I("#motivation-txt",{speed:26,startDelay:300,waitUntilVisible:!0,afterComplete:function(e){e.destroy()}}).go();const ae=100,w=document.querySelector(".skroll-btn"),re=()=>window.scrollY||document.documentElement.scrollTop;window.addEventListener("scroll",()=>{re()>ae?w.classList.add("skroll-btn-active"):w.classList.remove("skroll-btn-active")});w.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let U;const a={ratingModal:document.querySelector(".js-backdrop-modal"),closeBtn:document.querySelector(".js-rating-close"),rateStars:document.querySelector(".js-stars-list"),star:document.querySelectorAll(".js-rating-star"),openModalsBtn:document.querySelector(".exersizes-cards-container"),openRatingBtn:document.querySelector(".modal-button-rating"),exerciseModal:document.querySelector(".modal"),closeExerciseBtn:document.querySelector(".modal-button-close"),exsCont:document.querySelector(".exs-container")};document.addEventListener("click",ie);document.addEventListener("click",ue);document.addEventListener("keydown",me);function ie(e){e.target.classList.contains("exersizes-card-btn")?ce(e):e.target.classList.contains("modal-button-rating")&&le()}async function ce(e){try{const t=await getData(e.target.dataset.id);a.exsCont.innerHTML=createMarkup(t.data),a.exerciseModal.classList.add("is-open"),U=e.target.dataset.id,de()}catch(t){throw new Error(t.message)}}function le(e){a.ratingModal.classList.toggle("is-open")}function de(){const e=document.querySelector(".ex-rating-active"),t=document.querySelector(".modal-rating-value");e.style.width=`${parseFloat(t.textContent)/.05}%`}function ue(e){e.target.classList.contains("backdrop")&&a.ratingModal.classList.contains("is-open")?a.ratingModal.classList.remove("is-open"):e.target.classList.contains("backdrop")&&a.exerciseModal.classList.contains("is-open")||e.target.classList.contains("modal-button-close")||e.target.classList.contains("modal-button-close-icon")||e.target.classList.contains("modal-button-close-use")?a.exerciseModal.classList.remove("is-open"):(e.target.classList.contains("rating-close")||e.target.classList.contains("rating-close-svg")||e.target.classList.contains("rating-close-use"))&&a.ratingModal.classList.remove("is-open")}function me(e){e.code==="Escape"&&a.ratingModal.classList.contains("is-open")?a.ratingModal.classList.remove("is-open"):e.code==="Escape"&&a.exerciseModal.classList.contains("is-open")&&a.exerciseModal.classList.remove("is-open")}const l={modalBackdrop:document.querySelector(".js-backdrop-modal"),form:document.querySelector(".js-rating-form"),exerciseModal:document.querySelector(".modal"),rateValue:document.querySelector(".js-rating-data"),starsContainer:document.querySelector(".js-stars-list")};l.form.addEventListener("submit",ge);l.starsContainer.addEventListener("click",pe);function pe(e){e.target.classList.contains("rating-label")&&(l.rateValue.textContent=`${e.target.dataset.rate}.0`)}async function ge(e){e.preventDefault();try{const t=await b.patch(`https://energyflow.b.goit.study/api/exercises/${U}/rating`,{rate:parseInt(e.target.elements.rating.value),email:e.target.elements.email.value.trim(),review:e.target.elements.comment.value.trim()});_.operationSuccess()}catch(t){throw new Error(t.message)}finally{fe()}}function fe(){l.modalBackdrop.classList.remove("is-open"),l.exerciseModal.classList.remove("is-open"),l.rateValue.textContent="0.0",l.form.reset()}export{W as a};
//# sourceMappingURL=modal-form-1056f73c.js.map
